"""
設定ファイル - 株価データ取得・分析システムの設定値を一元管理

このファイルは株価データ取得および分析システム全体で使用される設定値を一元管理します。
ディレクトリパス、ファイル名、データ取得設定、テクニカル指標のパラメータなどが含まれています。

主な設定項目：
- ディレクトリパス設定（データ保存先、ログ出力先など）
- 入力ファイル設定（企業リストファイル）
- 出力ディレクトリ設定（分析結果保存先）
- 株価データ取得設定（API制限対策、取得期間など）
- ログ設定（ログファイル名、出力先など）
- テクニカル指標パラメータ（移動平均、RSI、MACD、RCI、一目均衡表など）
- レンジブレイク検出設定（検出期間、出来高要件など）
"""
import os
from datetime import datetime, timedelta

# =====================================================================
# ディレクトリパス設定
# =====================================================================

# 基本ディレクトリ - アプリケーションのルートディレクトリ
BASE_DIR = "C:\\Users\\mount\\Git\\StockAnalysis_Technical"

# テスト用ディレクトリ - テストモード実行時のデータ保存先
TEST_DIR = os.path.join(BASE_DIR, "StockSignal", "Test")

# =====================================================================
# 入力ファイル設定
# =====================================================================

# 通常処理用企業リストファイル - 分析対象の企業コード一覧CSVファイル
COMPANY_LIST_FILE = "company_list_20250426.csv"

# テスト用企業リストファイル - テストモード時の少数サンプル企業コード一覧
COMPANY_LIST_TEST_FILE = "company_list_20250228_test.csv"

# =====================================================================
# 出力ディレクトリ設定
# =====================================================================

# 通常処理用結果出力ディレクトリ - 株価データおよび分析結果の保存先
RESULT_DIR = os.path.join(BASE_DIR, "Data")

# テスト用結果出力ディレクトリ - テストモード時の結果保存先
TEST_RESULT_DIR = os.path.join(TEST_DIR, "Data")

# 通常処理用テクニカル指標出力ディレクトリ - テクニカル分析結果の保存先
TECHNICAL_DIR = os.path.join(BASE_DIR, "StockSignal", "TechnicalSignal")

# テスト用テクニカル指標出力ディレクトリ - テストモード時のテクニカル分析結果保存先
TEST_TECHNICAL_DIR = os.path.join(TEST_DIR)

# =====================================================================
# 株価データ取得設定
# =====================================================================

# バッチサイズ - APIリクエスト負荷分散のための一括取得企業数
# 大きすぎるとAPIレート制限に抵触する可能性があります
BATCH_SIZE = 100  # 一度に取得する企業数

# バッチ間待機時間 - APIレート制限回避のためのバッチ処理間隔（秒）
BATCH_WAIT_TIME = 5  # バッチ間の待機時間（秒）

# 銘柄間待機時間 - 個別銘柄データ取得間の待機時間（秒）
TICKER_WAIT_TIME = 0.5  # 銘柄間の待機時間（秒）

# 履歴取得期間 - yfinanceから取得する株価データの期間
# 有効値: 1d,5d,1mo,3mo,6mo,1y,2y,5y,10y,ytd,max
HISTORY_PERIOD = "6mo"  # 取得期間（6ヶ月）

# =====================================================================
# ログ設定
# =====================================================================

# 通常処理用ログディレクトリ - ログファイルの保存先
LOG_DIR = os.path.join(BASE_DIR, "Logs")

# テスト用ログディレクトリ - テストモード時のログ保存先
TEST_LOG_DIR = os.path.join(TEST_DIR, "Logs")

# ログファイル名 - 実行日付を含むログファイル名
# 日付が自動的に付与されるため、毎日のログが別ファイルに保存されます
LOG_FILE_NAME = f"stock_signal_{datetime.now().strftime('%Y%m%d')}.log"

# =====================================================================
# yfinance APIパラメータ設定
# =====================================================================

# 東証銘柄サフィックス - 日本の証券コードに付与するサフィックス
# 東京証券取引所の銘柄は通常「.T」を付けてyfinanceに問い合わせます
YF_SUFFIX = ".T"  # 東証の銘柄コードの接尾辞

# =====================================================================
# テクニカル指標のパラメータ設定
# =====================================================================

# 移動平均線の期間設定
# 短期(5日)、中期(25日)、長期(75日)の3種類の移動平均線を計算
MA_PERIODS = [5, 25, 75]

# MACD（Moving Average Convergence Divergence）のパラメータ
# 短期EMA期間、長期EMA期間、シグナル線期間の標準的な設定
MACD_FAST_PERIOD = 12    # 短期EMA期間
MACD_SLOW_PERIOD = 26    # 長期EMA期間
MACD_SIGNAL_PERIOD = 9   # シグナル線期間

# RSI（Relative Strength Index）のパラメータ
# 短期と長期の2種類のRSIを計算
RSI_SHORT_PERIOD = 9     # 短期RSI期間（過敏に反応）
RSI_LONG_PERIOD = 14     # 長期RSI期間（標準的な設定）

# RCI（Rank Correlation Index）のパラメータ
# 短期と長期の2種類のRCIを計算
RCI_SHORT_PERIOD = 9     # 短期RCI期間（短期的なトレンド転換検出用）
RCI_LONG_PERIOD = 26     # 長期RCI期間（中長期的なトレンド転換検出用）

# 一目均衡表（Ichimoku Cloud）のパラメータ
# 日本で開発された複合テクニカル指標のための期間設定
ICHIMOKU_TENKAN_PERIOD = 9        # 転換線期間（短期トレンド）
ICHIMOKU_KIJUN_PERIOD = 26        # 基準線期間（中期トレンド）
ICHIMOKU_SENKOU_SPAN_B_PERIOD = 52  # 先行スパンB期間（長期トレンド）
ICHIMOKU_DISPLACEMENT = 26        # 先行表示期間（将来予測）

# =====================================================================
# レンジブレイク検出設定
# =====================================================================

# レンジブレイク検出期間 - 過去の高値比較期間（日数）
RANGE_PERIOD_DAYS = 30  # デフォルト: 30日（約1か月）

# 最小出来高要件 - 有効とみなす最小出来高
MIN_VOLUME_THRESHOLD = 100000  # 10万株

# =====================================================================
# 出力ファイル設定
# =====================================================================

# 最新シグナルファイル名 - 最新の分析結果を保存するファイル名
LATEST_SIGNAL_FILE = "latest_signal.csv"

# =====================================================================
# ボリンジャーバンド設定
# =====================================================================

# ボリンジャーバンドのパラメータ
BOLLINGER_PERIOD = 20        # ミドルバンド（移動平均線）の期間（標準：20日）
BOLLINGER_STD_DEV = 2.0      # 標準偏差の倍率（標準：2倍）